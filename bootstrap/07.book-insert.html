<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <!-- font-awesome -->
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

  <!-- jquery cdn -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.8/flatly/bootstrap.rtl.min.css"
    rel="stylesheet">

  <style>
  </style>

  <script type="text/javascript">
    $(function () {
      var state = {
        bookTitleValid: false,
        bookAuthorValid: true,
        bookPublicationDateValid: true,
        bookPriceValid: false,
        bookPublisherValid: true,
        bookPageCountValid: false,
        bookGenreValid: false,
        ok: function () {
          return this.bookTitleValid &&
            this.bookPriceValid &&
            this.bookPageCountValid &&
            this.bookGenreValid;
        }
      };

      $("[name=bookTitle]").on("blur", function () {
        var valid = ($(this).val()) > 0;
        $(this).removeClass("is-valid is-invalid").addClass(valid ? "is-valid" : "is-invalid");
        state.bookTitleValid = valid;
      });
      $("[name=bookAuthor]").on("blur", function () {
        var regex = /^[^!@#$]+$/;
        var valid = regex.test($(this).val());
        $(this).removeClass("is-valid is-invalid").addClass(valid ? "is-valid" : "is-invalid");
        state.bookAuthorValid = valid;
      });
      $("[name=bookPublicationDate]").on("blur", function () {
        var regex = /^([0-9]{4})-((02-(0[1-9]|1[0-9]|2[0-9]))|((0[469]|11)-(0[1-9]|1[0-9]|2[0-9]|30))|((0[13578]|1[02])-(0[1-9]|1[0-9]|2[0-9]|3[01])))$/;
        var valid = regex.test($(this).val());
        $(this).removeClass("is-valid is-invalid").addClass(valid ? "is-valid" : "is-invalid");
        state.bookAuthorValid = valid;
      });
      $("[name=bookPrice]").on("blur", function () {
        var price = parseInt($(this).val());
        var valid = price >= 0;
        $(this).removeClass("is-valid is-invalid").addClass(valid ? "is-valid" : "is-invalid");
        state.bookPriceValid = valid;
      });
      $("[name=bookPageCount]").on("blur", function () {
        var pageCount = parseInt($(this).val());
        var valid = pageCount > 0;
        $(this).removeClass("is-valid is-invalid").addClass(valid ? "is-valid" : "is-invalid");
        state.bookPageCountValid = valid;
      });
      $("[name=bookGenre]").on("blur", function () {
        var valid = $(this).val().length > 0;

        $(this).removeClass("is-valid is-invalid").addClass(valid ? "is-valid" : "is-invalid");
        state.bookGenreValid = valid;
      });

      $(".check-form").on("submit", function () {
        $(this).find("[name]").trigger("blur");
        return state.ok();
      });
    });
  </script>
</head>

<body>

  <form action="save" method="post" autocomplete="off" class="check-form">
    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col-md-4 offset-md-4 col-sm-10 offset-sm-1">
          <div class="container-fluid">

            <!-- 점보트론(jumbotron) -->
            <div class="row">
              <div class="col">
                <div class="bg-dark text-light p-4 rounded-4">
                  <h1>도서 등록</h1>
                  <p>도서를 등록하기 위한 정보를 입력합니다</p>
                </div>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>도서 제목<i class="fa-solid fa-asterisk text-danger"></i></label>
                <input type="text" name="bookTitle" class="form-control">
                <!-- <div class="success-feedback">형식에 맞는 도서명입니다</div> -->
                <div class="invalid-feedback">도서명은 필수 항목입니다</div>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>저자</label>
                <input type="text" name="bookAuthor" class="form-control">
                <!-- <div class="success-feedback">멋진 저자 이름입니다!</div> -->
                <div class="invalid-feedback">특수문자는 사용하실 수 없습니다</div>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>출간일</label>
                <input type="date" name="bookPublicationDate" class="form-control">
                <!-- <div class="success-feedback">올바른 날짜 형식입니다</div> -->
                <div class="invalid-feedback">잘못된 날짜 형식입니다</div>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>출판사</label>
                <input type="text" name="bookPublisher" class="form-control">
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>판매가<i class="fa-solid fa-asterisk text-danger"></i></label>
                <input type="text" name="bookPrice" class="form-control">
                <div class="valid-feedback">가격 설정이 완료되었습니다</div>
                <div class="invalid-feedback">가격은 0 이상으로 설정하셔야 합니다</div>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>페이지 수<i class="fa-solid fa-asterisk text-danger"></i></label>
                <input type="text" name="bookPageCount" class="form-control">
                <div class="valid-feedback">페이지 설정이 완료되었습니다</div>
                <div class="invalid-feedback">페이지 수는 0보다 커야 합니다</div>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col">
                <label>장르<i class="fa-solid fa-asterisk text-danger"></i></label>
                <select name="bookGenre" class="form-selector">
                  <option value="">선택하세요</option>
                  <option>추리/미스터리</option>
                  <option>과학소설</option>
                  <option>판타지</option>
                  <option>로맨스</option>
                  <option>스릴러/서스펜스</option>
                  <option>역사 소설</option>
                  <option>전기/평전</option>
                  <option>성장 소설</option>
                  <option>자기 계발</option>
                </select>
                <div class="invalid-feedback">장르는 반드시 선택하셔야 합니다</div>
              </div>
            </div>

            <!-- 컨텐츠 내용 -->
            <div class="row mt-4">
              <div class="col">
                <button type="submit" class="btn btn-primary w-100">
                  <i class="fa-solid fa-floppy-disk"></i>
                  <span>도서 등록</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
  </form>


</body>

</html>