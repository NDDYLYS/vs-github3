<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="./commons.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    
    <style>

    </style>
    <script type = "text/javascript">
        window.addEventListener("load", function()
        {
            var state = 
            {
                studentNameValid : false,
                studentKorValid : false,
                studentEngValid : false,
                studentMatValid : false,
                ok : function()
                {
                    return this.studentNameValid && 
                    this.studentKorValid &&
                    this.studentEngValid && 
                    this.studentMatValid;
                }
            };

            document.querySelector("[name=studentName]").addEventListener("blur", function()
            {
                var regex = /^[가-힣]{2,7}$/;
                var valid = regex.test(this.value);
                this.classList.remove("success", "fail");
                this.classList.add(valid ? "success" : "fail");
                state.studentNameValid = valid;
            });
            document.querySelector("[name=studentKor]").addEventListener("input", function()
            {
                var regex = /^(100|[1-9][0-9]|[0-9])$/;
                var valid = regex.test(this.value);
                this.classList.remove("success", "fail");
                this.classList.add(valid ? "success" : "fail");
                state.studentKorValid = valid;
            });
            document.querySelector("[name=studentEng]").addEventListener("input", function()
            {
                var regex = /^(100|[1-9][0-9]|[0-9])$/;
                var valid = regex.test(this.value);
                this.classList.remove("success", "fail");
                this.classList.add(valid ? "success" : "fail");
                state.studentEngValid = valid;
            });
            document.querySelector("[name=studentMat]").addEventListener("input", function()
            {
                var regex = /^(100|[1-9][0-9]|[0-9])$/;
                var valid = regex.test(this.value);
                this.classList.remove("success", "fail");
                this.classList.add(valid ? "success" : "fail");
                state.studentMatValid = valid;
            });

            document.querySelector(".check-form").addEventListener("submit", function(e)
            {
                document.querySelector("[name=studentName]").dispatchEvent(new Event("blur"));
                document.querySelector("[name=studentKor]").dispatchEvent(new Event("blur"));
                document.querySelector("[name=studentEng]").dispatchEvent(new Event("blur"));
                document.querySelector("[name=studentMat]").dispatchEvent(new Event("blur"));

                if(state.ok() == false)
                    e.preventDefault();
            });
        });
    </script>
</head>
<body>


    <form action="add" method="post" enctype="multipart/form-data"
    class = "check-form">
        <div class = "cell mb-30 center">
            <h1>학생 등록</h1>
        </div>
        <div class = "cell mt-30">
            <label>학생 이름 *</label>
            <input type= "text" name = "studentName"
             class = "field w-100" placeholder="(ex)홍길동">
            <div class = "success-feedback">훌륭한 학생 이름입니다.</div>
            <div class = "fail-feedback">잘못된 학생 이름입니다.</div>
        </div>
        <div class = "cell mt-10">
            <label>국어점수 *</label>
            <input type= "number" name = "studentKor"
             class = "field w-100" placeholder="0~100" 
             inputmode = "numeric">
            <div class = "success-feedback">올바른 국어점수입니다.</div>
            <div class = "fail-feedback">옳지 못한 국어점수입니다.</div>
        </div>
        <div class = "cell mt-10">
            <label>영어점수 *</label>
            <input type= "number" name = "studentEng"
             class = "field w-100" placeholder="0~100" 
             inputmode = "numeric">
            <div class = "success-feedback">올바른 영어점수입니다.</div>
            <div class = "fail-feedback">옳지 못한 영어점수입니다.</div>
        </div>
        <div class = "cell mt-10">
            <label>수학점수 *</label>
            <input type= "number" name = "studentMat"
             class = "field w-100" placeholder="0~100" 
             inputmode = "numeric">
            <div class = "success-feedback">올바른 수학점수입니다.</div>
            <div class = "fail-feedback">옳지 못한 수학점수입니다.</div>
        </div>
        <div class = "cell">
            <label>학생 사진 *</label>
            <input type = "file"
            name = "attach" accept = ".png,.jpg" class = "field w-100">
        </div>
        <div class = "cell">
            <button type = "submit" class = "btn btn-positive w-100">
                <i class="fa-solid fa-floppy-disk"></i>
                등록하기
            </button>
        </div>
    </form>
    
</body>
</html>