<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="./commons.css">
    <!-- font-awesome -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    
    <style>

    </style>
    <!-- jquery cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- momentjs cdn-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/locale/ko.min.js"></script>
    <!-- chartjs cdn -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- lightpick cdn -->
    <link href="https://cdn.jsdelivr.net/npm/lightpick@1.6.2/css/lightpick.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lightpick@1.6.2/lightpick.min.js"></script>

    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3c0495b79296959d8f7b0982b61fdf54&libraries=services"></script>
    <script type = "text/javascript">
        $(function(){
            var container = document.querySelector(".kakao-map");
            var options = {
                center: new kakao.maps.LatLng(37.499018, 127.032894),
                level: 1,
            };

            var map = new kakao.maps.Map(container, options);

            var history = [];

            $(".address-search-btn").on("click", function(){
                for(var i = 0; i < history.length; i++)
                {
                    history[i].setMap(null);
                }
                history = [];

                var address = $(".address-input").val();
                if (address.trim().length == 0)
                    return;

                var geocoder = new kakao.maps.services.Geocoder();
                geocoder.addressSearch(address, function(result, status){
                    if (status == kakao.maps.services.Status.OK) // status == "OK"
                    {
                        var location = new kakao.maps.LatLng(result[0].y, result[0].x);
                        map.setCenter(location);

                        var marker = new kakao.maps.Marker({ 
                            position: location
                        }); 
                        marker.setMap(map);

                        history.push(marker);
                    }
                });
            });
        });
    </script>
</head>
<body>


    <div class = "container w-800">
        <div class = "cell center">
            <h1>Kakao Map</h1>
        </div>

        <div class = "cell">
            <div class = "flex-box">
                <input type="text" class="field w-100 address-input">
                <button class="btn btn-positive ms-10 address-search-btn">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
            </div>

            <div class="kakao-map w-100" style="height:300px;">
            </div>
        </div>
    </div>

    
</body>
</html>